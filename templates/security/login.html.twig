{% extends 'base_front.html.twig' %}

{% block title %}Connexion - BioSync{% endblock %}

{% block body %}
<div class="modern-auth-wrapper">
    <div class="modern-auth-container">
        {# Logo et titre #}
        <div class="modern-auth-header">
            <div class="modern-auth-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="12" cy="8" r="7"/>
                    <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/>
                </svg>
            </div>
            <h1 class="modern-auth-brand">BioSync</h1>
            <p class="modern-auth-tagline">Connectez-vous pour accéder à votre espace santé</p>
        </div>

        {# Carte formulaire #}
        <div class="modern-auth-card">
            <h2 class="modern-auth-form-title">Connexion</h2>

            {% if error %}
                <div class="modern-error-alert">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="15" y1="9" x2="9" y2="15"/>
                        <line x1="9" y1="9" x2="15" y2="15"/>
                    </svg>
                    {{ error.messageKey|trans(error.messageData, 'security') }}
                </div>
            {% endif %}

            {# HTML5 validation disabled - using Symfony validators instead #}
            <form method="post" class="modern-auth-form" novalidate>
                {# Email #}
                <div class="modern-form-group">
                    <label class="modern-form-label">Adresse email</label>
                    <div class="modern-input-wrapper">
                        <svg class="modern-input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                            <polyline points="22,6 12,13 2,6"/>
                        </svg>
                        {# HTML5 validation disabled - using Symfony validators instead #}
                        {# HTML5 type=email disabled - using Symfony Email validator instead #}
                        <input type="text" name="_username" value="{{ last_username }}" class="modern-input" placeholder="votre@email.com" {# required autofocus #}>
                    </div>
                </div>

                {# Mot de passe #}
                <div class="modern-form-group">
                    <label class="modern-form-label">Mot de passe</label>
                    <div class="modern-input-wrapper">
                        <svg class="modern-input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                        {# HTML5 validation disabled - using Symfony validators instead #}
                        {# HTML5 type=password disabled - using Symfony validators instead #}
                        <input type="text" name="_password" class="modern-input" placeholder="••••••••" {# required #}>
                    </div>
                </div>

                {# Remember me #}
                <div class="modern-checkbox-wrapper" style="padding: 12px;">
                    <input type="checkbox" id="remember_me" name="_remember_me">
                    <label for="remember_me">Se souvenir de moi</label>
                </div>

                {# CSRF token (keep this) #}
                <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

                {# Bouton submit avec gradient #}
                <button type="submit" class="modern-btn-gradient">
                    Se connecter
                </button>
            </form>

            {# Lien inscription #}
            <div class="modern-auth-footer">
                Pas encore de compte? <a href="{{ path('app_register') }}">S'inscrire</a>
            </div>
        </div>

        {# Copyright footer #}
        <div class="modern-auth-copyright">
            © 2026 BioSync - Santé, Science & Bien-être
        </div>
    </div>
</div>
{% endblock %}
