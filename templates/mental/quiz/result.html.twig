{% extends 'base_back.html.twig' %}

{% block title %}Résultats du Quiz - BioSync{% endblock %}

{% block body %}
<div class="quiz-result-container">
    {# Success Card #}
    <div class="quiz-result-card">
        {# Icon celebration #}
        <div class="quiz-result-icon">
            {% if percentage >= 80 %}
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="icon-trophy">
                    <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/>
                    <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/>
                    <path d="M4 22h16"/>
                    <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/>
                    <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/>
                    <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
                </svg>
            {% elseif percentage >= 60 %}
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="icon-medal">
                    <circle cx="12" cy="8" r="6"/>
                    <path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"/>
                </svg>
            {% else %}
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="icon-check">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
            {% endif %}
        </div>

        {# Title and score #}
        <h1 class="quiz-result-title">Quiz Terminé !</h1>
        <p class="quiz-result-subtitle">Voici vos résultats</p>

        {# Score Display #}
        <div class="quiz-score-display">
            <div class="quiz-score-circle">
                <svg class="quiz-score-svg" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" class="quiz-score-bg"/>
                    <circle cx="50" cy="50" r="45" class="quiz-score-progress" 
                            style="stroke-dasharray: {{ percentage * 2.827 }} 283; transform: rotate(-90deg); transform-origin: center;"/>
                </svg>
                <div class="quiz-score-text">
                    <span class="quiz-score-number">{{ percentage }}%</span>
                    <span class="quiz-score-label">Réussite</span>
                </div>
            </div>
        </div>

        {# Stats Grid #}
        <div class="quiz-stats-grid">
            <div class="quiz-stat-item">
                <div class="quiz-stat-value">{{ correctAnswers }}/{{ totalQuestions }}</div>
                <div class="quiz-stat-label">Bonnes réponses</div>
            </div>
            <div class="quiz-stat-item">
                <div class="quiz-stat-value">{{ totalScore }}</div>
                <div class="quiz-stat-label">Points totaux</div>
            </div>
        </div>

        {# Médaille #}
        {% if medaille %}
            <div class="quiz-medal-badge">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                </svg>
                <div>
                    <div class="quiz-medal-title">Médaille obtenue</div>
                    <div class="quiz-medal-name">{{ medaille }}</div>
                </div>
            </div>
        {% endif %}

        {# Performance Message #}
        <div class="quiz-performance-message">
            {% if percentage >= 80 %}
                <strong>Excellent !</strong> Vous maîtrisez très bien le sujet.
            {% elseif percentage >= 60 %}
                <strong>Très bien !</strong> Vous avez de bonnes connaissances.
            {% elseif percentage >= 40 %}
                <strong>Bien !</strong> Continuez à progresser.
            {% else %}
                <strong>Continuez !</strong> La pratique mène à la perfection.
            {% endif %}
        </div>

        {# Actions #}
        <div class="quiz-result-actions">
            <a href="{{ path('app_mental') }}" class="btn btn-primary">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="1 4 1 10 7 10"/>
                    <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
                </svg>
                Choisir un autre quiz
            </a>
            <a href="{{ path('app_dashboard') }}" class="btn btn-secondary">
                Retour au dashboard
            </a>
        </div>
    </div>
</div>
{% endblock %}
