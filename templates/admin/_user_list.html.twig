{# templates/admin/_user_list.html.twig #}
{% for user in users %}
    <tr>
        <td>
            <div class="user-info">
                <div class="user-avatar">{{ user.nomComplet|slice(0, 2)|upper }}</div>
                <div class="user-details">
                    <div class="user-name">{{ user.nomComplet }}</div>
                    <div class="user-email">{{ user.email }}</div>
                </div>
            </div>
        </td>
        <td>
            {% if 'ROLE_ADMIN' in user.roles %}
                <span class="role-badge admin">Admin</span>
            {% elseif 'ROLE_COACH' in user.roles %}
                <span class="role-badge coach">Coach</span>
            {% elseif 'ROLE_SPECIALISTE' in user.roles %}
                <span class="role-badge specialist">Spécialiste</span>
            {% else %}
                <span class="role-badge user">Utilisateur</span>
            {% endif %}
        </td>
        <td>{{ user.dateInscription ? user.dateInscription|date('d/m/Y') : '-' }}</td>
        <td>
            <span class="score-badge">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                {{ user.scoreGlobal ?? 0 }}
            </span>
        </td>
        <td style="text-align: center;">
            <div style="display: flex; gap: 8px; justify-content: center;">
                <a href="{{ path('app_admin_user_show', {id: user.id}) }}" class="action-btn view" title="Voir">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                </a>
                <a href="{{ path('app_admin_user_edit', {id: user.id}) }}" class="action-btn edit" title="Modifier">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                </a>
                <form method="post" action="{{ path('app_admin_user_delete', {id: user.id}) }}" onsubmit="return confirm('Supprimer cet utilisateur ?');" style="display: inline;">
                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
                    <button type="submit" class="action-btn delete" title="Supprimer" style="border: none; background: rgba(239, 68, 68, 0.1); color: #EF4444; width: 32px; height: 32px; border-radius: 8px; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; transition: all 0.2s;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                    </button>
                </form>
            </div>
        </td>
    </tr>
{% else %}
    <tr>
        <td colspan="5" style="padding: 40px; text-align: center;">
            <div style="color: #718096;">
                {% if current_q %}
                    <div style="font-size: 16px; margin-bottom: 8px;">Aucun utilisateur trouvé pour "{{ current_q }}"</div>
                    <div style="font-size: 14px;">Essayez une autre recherche</div>
                {% else %}
                    <div style="font-size: 16px; margin-bottom: 8px;">Aucun utilisateur trouvé</div>
                {% endif %}
            </div>
        </td>
    </tr>
{% endfor %}
